<!DOCTYPE html>
<html lang="en" class="h-full scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>King Jerome P. Lacerna • Portfolio</title>
    <meta name="theme-color" content="#4F46E5" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;900&family=Pixelify+Sans:wght@400..700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="./assets/css/main.css" />
    <style>
      .intro-overlay{position:fixed;inset:0;z-index:70;display:flex;align-items:center;justify-content:center;background:radial-gradient(circle at 18% 20%,rgba(99,102,241,.25),transparent 32%),radial-gradient(circle at 78% 38%,rgba(168,85,247,.22),transparent 32%),radial-gradient(circle at 50% 65%,rgba(14,165,233,.18),transparent 34%),linear-gradient(135deg,#050814 0%,#0a1022 48%,#060914 100%);color:#e5e7eb;transition:opacity .6s ease,visibility .6s ease;overflow:hidden;padding:clamp(1.2rem,3vw,2rem);}
      .intro-overlay::before{content:"";position:absolute;inset:0;background:linear-gradient(120deg,rgba(255,255,255,.05) 0%,rgba(255,255,255,0) 40%,rgba(255,255,255,.05) 70%,rgba(255,255,255,0) 100%);opacity:.22;mix-blend-mode:screen;animation:intro-sheen 6s linear infinite;}
      .intro-overlay::after{content:"";position:absolute;inset:-40%;background:radial-gradient(circle,rgba(255,255,255,.08) 0%,transparent 50%);animation:intro-float 14s ease-in-out infinite;opacity:.32;}
      .intro-grid,.intro-sparkles,.intro-noise{position:absolute;inset:0;pointer-events:none;}
      .intro-grid{background:linear-gradient(rgba(255,255,255,.04) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.04) 1px,transparent 1px);background-size:120px 120px;opacity:.18;mask-image:radial-gradient(circle at 50% 50%,rgba(255,255,255,.7),transparent 70%);}
      .intro-sparkles{background:radial-gradient(circle at 20% 30%,rgba(255,255,255,.35) 0,rgba(255,255,255,0) 18%),radial-gradient(circle at 70% 20%,rgba(255,255,255,.28) 0,rgba(255,255,255,0) 16%),radial-gradient(circle at 80% 70%,rgba(255,255,255,.3) 0,rgba(255,255,255,0) 20%);mix-blend-mode:screen;animation:intro-spark 8s ease-in-out infinite alternate;opacity:.55;}
      .intro-noise{background-image:url('data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%2240%22 height=%2240%22 viewBox=%220 0 40 40%22%3E%3Cpath fill=%22rgba(255,255,255,0.05)%22 d=%22M0 0h2v2H0zM20 10h2v2h-2zM10 20h2v2h-2zM30 30h2v2h-2zM5 35h2v2H5zM25 5h2v2h-2z%22/%3E%3C/svg%3E');opacity:.25;mix-blend-mode:soft-light;}
      .intro-shell{position:relative;z-index:1;display:grid;grid-template-columns:1.08fr .92fr;align-items:center;gap:clamp(1.8rem,4vw,3rem);width:min(1120px,92%);padding:clamp(1.9rem,3.4vw,3rem) clamp(1.7rem,4.2vw,3.3rem);border:1px solid rgba(255,255,255,.08);border-radius:1.6rem;backdrop-filter:blur(12px);background:linear-gradient(135deg,rgba(14,18,34,.8),rgba(6,9,18,.72));box-shadow:0 36px 110px rgba(0,0,0,.55),0 0 0 1px rgba(255,255,255,.02);animation:intro-pop .7s ease forwards;transform:translateY(10px) scale(.98);opacity:0;}
      .intro-meta{max-width:640px;}
      .intro-badge{letter-spacing:.25em;text-transform:uppercase;font-size:.68rem;color:#c7d2fe;display:inline-flex;align-items:center;gap:.4rem;margin-bottom:1rem;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);padding:.45rem .95rem;border-radius:9999px;box-shadow:0 8px 30px rgba(0,0,0,.2);}
      .intro-dot{width:7px;height:7px;border-radius:9999px;background:linear-gradient(120deg,#8b5cf6,#22d3ee);box-shadow:0 0 12px rgba(139,92,246,.7);}
      .intro-title{font-family:'Pixelify Sans', cursive;font-size:clamp(2.45rem,3.9vw,3.2rem);font-weight:800;letter-spacing:.01em;margin-bottom:.2rem;color:#f8fafc;text-shadow:0 10px 40px rgba(0,0,0,.6);}
      .intro-tagline{display:inline-flex;align-items:center;gap:.5rem;font-size:.9rem;letter-spacing:.08em;text-transform:uppercase;color:#a5b4fc;margin-bottom:.8rem;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08);padding:.4rem .9rem;border-radius:9999px;box-shadow:0 12px 32px rgba(0,0,0,.28);}
      .intro-tagline::before{content:"//";color:#8b5cf6;font-weight:700;}
      .intro-sub{color:#cbd5e1;font-size:1.02rem;line-height:1.6;max-width:48ch;}
      .intro-row{margin-top:1.1rem;display:flex;gap:.55rem;flex-wrap:wrap;}
      .intro-chip{font-size:.82rem;padding:.5rem .85rem;border-radius:.9rem;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08);color:#e5e7eb;animation:intro-rise .9s ease forwards;opacity:0;transform:translateY(6px);box-shadow:0 10px 32px rgba(0,0,0,.18);}
      .intro-chip:nth-child(1){animation-delay:.2s;}
      .intro-chip:nth-child(2){animation-delay:.32s;}
      .intro-chip:nth-child(3){animation-delay:.44s;}
      .intro-progress{margin-top:1.35rem;width:82%;height:8px;border-radius:9999px;background:rgba(255,255,255,.08);overflow:hidden;position:relative;box-shadow:0 12px 32px rgba(0,0,0,.28) inset;}
      .intro-progress span{display:block;height:100%;width:0;background:linear-gradient(90deg,#4f46e5,#8b5cf6,#0ea5e9);animation:intro-bar 1.7s ease forwards .25s;box-shadow:0 10px 24px rgba(99,102,241,.45);}
      .intro-hint{font-size:.86rem;margin-top:.7rem;opacity:.82;color:#cbd5e1;display:flex;align-items:center;gap:.45rem;}
      .intro-enter{margin-top:1.15rem;display:inline-flex;align-items:center;gap:.55rem;padding:.7rem 1.25rem;border-radius:1rem;background:linear-gradient(120deg,rgba(99,102,241,.28),rgba(14,165,233,.26));border:1px solid rgba(255,255,255,.2);color:#e5e7eb;font-weight:800;font-size:.94rem;letter-spacing:.01em;transition:transform .2s ease,box-shadow .2s ease,filter .2s ease;box-shadow:0 18px 44px rgba(0,0,0,.32);}
      .intro-enter:hover{transform:translateY(-2px) scale(1.01);box-shadow:0 20px 52px rgba(0,0,0,.36);filter:brightness(1.05);}
      .intro-graphic{position:relative;isolation:isolate;min-height:300px;max-height:400px;display:flex;align-items:center;justify-content:center;}
      .intro-orb{position:absolute;inset:10%;background:radial-gradient(circle at 30% 30%,rgba(124,58,237,.58),rgba(59,130,246,.38),rgba(8,7,17,.55));filter:blur(12px);border-radius:32%;transform:rotate(-6deg);animation:intro-float 12s ease-in-out infinite;opacity:.9;}
      .intro-ring{position:absolute;inset:16%;border:1px solid rgba(255,255,255,.12);border-radius:42%;transform:rotate(8deg);animation:intro-spin 16s linear infinite;}
      .intro-ring-two{inset:4%;border-radius:50%;opacity:.62;animation-direction:reverse;}
      .intro-beam{position:absolute;width:62%;height:160%;background:linear-gradient(120deg,rgba(255,255,255,.22),rgba(255,255,255,0));transform:rotate(-16deg);mix-blend-mode:screen;animation:intro-sheen 6s linear infinite;opacity:.5;}
      .intro-label{position:relative;z-index:1;padding:.55rem 1.05rem;border-radius:.95rem;background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.16);backdrop-filter:blur(10px);color:#e5e7eb;font-size:.92rem;font-weight:700;display:inline-flex;align-items:center;gap:.55rem;box-shadow:0 16px 36px rgba(0,0,0,.3);text-transform:uppercase;letter-spacing:.08em;}
      .intro-label::before{content:"";width:9px;height:9px;border-radius:9999px;background:linear-gradient(120deg,#22d3ee,#8b5cf6);box-shadow:0 0 18px rgba(139,92,246,.85);}      
      .intro-hide{opacity:0;visibility:hidden;}
      @keyframes intro-bar{to{width:100%;}}
      @keyframes intro-pop{to{opacity:1;transform:translateY(0) scale(1);}}
      @keyframes intro-rise{to{opacity:1;transform:translateY(0);}}
      @keyframes intro-sheen{from{transform:translateX(-20%);}to{transform:translateX(20%);}}
      @keyframes intro-float{0%{transform:translate(0,0) scale(1);}50%{transform:translate(8%,6%) scale(1.05);}100%{transform:translate(0,0) scale(1);} }
      @keyframes intro-spin{from{transform:rotate(0deg);}to{transform:rotate(360deg);} }
      @keyframes intro-spark{0%{opacity:.35;transform:translateY(-4px);}100%{opacity:.65;transform:translateY(6px);}}
      @media (max-width:900px){
        .intro-shell{grid-template-columns:1fr;gap:1.6rem;}
        .intro-progress{width:100%;}
        .intro-graphic{min-height:240px;}
      }
      @media (max-width:640px){
        .intro-shell{padding:1.4rem 1.1rem;}
        .intro-title{font-size:2.1rem;}
      }
    </style>
  </head>
  <body class="min-h-full bg-white dark:bg-gray-950 text-gray-950 dark:text-gray-100 transition-colors duration-300" style="font-family: 'Poppins', sans-serif;">
    <div id="intro-overlay" class="intro-overlay">
      <div class="intro-grid" aria-hidden="true"></div>
      <div class="intro-sparkles" aria-hidden="true"></div>
      <div class="intro-noise" aria-hidden="true"></div>
      <div class="intro-shell">
        <div class="intro-meta">
          <div class="intro-badge"><span class="intro-dot"></span><span>Portfolio</span></div>
          <div class="intro-tagline">Front-end engineer • UI systems • Motion</div>
          <div class="intro-title">King Jerome P. Lacerna</div>
          <p class="intro-sub">Crafting playful, precise web experiences with a pixel heart.</p>
          <div class="intro-row">
            <span class="intro-chip">Pixelify vibe</span>
            <span class="intro-chip">Clean builds</span>
            <span class="intro-chip">Human-first</span>
          </div>
          <div class="intro-progress" aria-hidden="true"><span></span></div>
          <p class="intro-hint">Click, tap, or press Enter to dive in</p>
          <button id="intro-enter" class="intro-enter" type="button" aria-label="Enter the portfolio">
            <span>Enter now</span>
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
              <path d="M3 8h10M9 4l4 4-4 4" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </button>
        </div>
        <div class="intro-graphic" aria-hidden="true">
          <div class="intro-orb"></div>
          <div class="intro-ring"></div>
          <div class="intro-ring intro-ring-two"></div>
          <div class="intro-beam"></div>
          <div class="intro-label">Loading smooth pixels</div>
        </div>
      </div>
    </div>
    <nav class="sticky top-0 z-50 border-b border-gray-200 dark:border-gray-800 bg-white/80 dark:bg-gray-950/80 backdrop-blur transition-colors duration-300">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 flex h-14 items-center justify-between">
        <a href="./index.html" class="font-semibold text-gray-900 dark:text-gray-300">K.J</a>
        <div class="flex items-center gap-8">
          <ul class="flex items-center gap-8">
            <li><a class="hover:text-gray-700 dark:hover:text-gray-300 text-gray-600 dark:text-gray-400 text-sm transition" href="./index.html">Home</a></li>
            <li><a class="hover:text-gray-700 dark:hover:text-gray-300 text-gray-600 dark:text-gray-400 text-sm transition" href="./pages/about.html">About</a></li>
            <li><a class="hover:text-gray-700 dark:hover:text-gray-300 text-gray-600 dark:text-gray-400 text-sm transition" href="./pages/projects.html">Projects</a></li>
            <li><a class="hover:text-gray-700 dark:hover:text-gray-300 text-gray-600 dark:text-gray-400 text-sm transition" href="./pages/contact.html">Contact</a></li>
          </ul>
          <button id="theme-toggle" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 hover:bg-gray-200 dark:hover:bg-gray-700 transition" aria-label="Toggle theme">
            <svg id="sun-icon" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <circle cx="12" cy="12" r="5"></circle>
              <line x1="12" y1="1" x2="12" y2="3"></line>
              <line x1="12" y1="21" x2="12" y2="23"></line>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line x1="1" y1="12" x2="3" y2="12"></line>
              <line x1="21" y1="12" x2="23" y2="12"></line>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <svg id="moon-icon" class="w-5 h-5 hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
          </button>
        </div>
      </div>
    </nav>

    <main class="relative min-h-[75vh] flex items-center px-4 py-8 sm:py-12 bg-white dark:bg-gray-950 transition-colors duration-300">
      <div class="mx-auto max-w-7xl grid gap-8 lg:gap-12 md:grid-cols-2 items-center">
        <!-- Left: Copy -->
        <div class="space-y-4">
          <span class="inline-flex items-center gap-2 rounded-full border border-indigo-200 dark:border-indigo-800 bg-indigo-50/50 dark:bg-indigo-900/20 px-3 py-1 text-xs font-medium uppercase tracking-widest text-indigo-700 dark:text-indigo-300">
            Welcome to my portfolio
          </span>

          <h1 class="space-y-2">
            <span class="block text-4xl sm:text-5xl lg:text-6xl font-black tracking-tight text-gray-950 dark:text-white" style="font-family: 'Pixelify Sans', sans-serif;">
              King Jerome P. Lacerna
            </span>
            <span class="block text-xl sm:text-2xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 via-violet-500 to-pink-500">
              Web developer & creative designer
            </span>
          </h1>

          <p class="text-sm sm:text-base text-gray-600 dark:text-gray-400 max-w-xl leading-relaxed">
            I craft clean, accessible, and performant digital experiences for startups and brands worldwide.
          </p>

          <div class="mt-8 flex flex-col sm:flex-row items-center gap-4 sm:gap-6">
            <a href="./pages/about.html" class="cta-link group inline-flex items-center gap-2 rounded-full bg-indigo-600 text-white px-5 py-3 shadow hover:shadow-lg hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-400 transition">
              <span class="cta-label">see my projects</span>
              <svg class="cta-arrow w-4 h-4" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path d="M1 8h12M13 8L9 4M13 8L9 12" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
            </a>

            <a href="./pages/about.html" class="cta-link group inline-flex items-center gap-2 rounded-full border border-gray-300 dark:border-gray-700 px-5 py-3 text-gray-900 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800 transition">
              <span class="cta-label">more about me</span>
              <svg class="cta-arrow w-4 h-4" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path d="M1 8h12M13 8L9 4M13 8L9 12" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
            </a>
          </div>
        </div>

        <!-- Right: Ambient visual (no external image) -->
        <div class="relative">
          <div class="relative w-full max-w-xs sm:max-w-sm lg:max-w-md mx-auto aspect-[4/5] rounded-2xl overflow-hidden ring-1 ring-gray-200 dark:ring-gray-800 bg-gradient-to-br from-indigo-500/20 via-fuchsia-500/10 to-emerald-500/20">
            <!-- Glow -->
            <div class="absolute inset-0 flex items-center justify-center">
              <div class="h-32 w-32 sm:h-40 sm:w-40 rounded-full bg-gradient-to-tr from-indigo-500 to-pink-500 blur-2xl opacity-40"></div>
            </div>
            <!-- Skill badges -->
            <div class="absolute inset-x-6 bottom-6 flex flex-wrap gap-2">
              <span class="badge">HTML</span>
              <span class="badge">CSS</span>
              <span class="badge">JavaScript</span>
              <span class="badge">Tailwind</span>
              <span class="badge">Figma</span>
            </div>
          </div>
        </div>
      </div>

      <div aria-hidden="true" class="absolute inset-0 -z-10 pointer-events-none">
        <div class="absolute left-1/2 -top-10 h-60 w-60 sm:h-80 sm:w-80 -translate-x-1/2 rounded-full bg-gradient-to-tr from-indigo-400/20 to-pink-400/20 blur-3xl"></div>
      </div>
    </main>

    <!-- Scroll hint positioned after main -->
    <div class="relative -mt-16 pointer-events-none">
      <a href="#projects" aria-label="Scroll to projects" class="pointer-events-auto absolute left-1/2 -translate-x-1/2 inline-flex items-center gap-2 px-3 py-2 rounded-full bg-white/70 dark:bg-gray-900/50 backdrop-blur-sm border border-gray-200 dark:border-gray-800 text-xs text-gray-700 dark:text-gray-300 hover:bg-white dark:hover:bg-gray-800 transition">
        <span>Scroll</span>
        <svg class="w-4 h-4 animate-bounce" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path d="M3 6l5 5 5-5" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
      </a>
    </div>

    <!-- Decorative wave separator -->
    <div class="wave-separator" aria-hidden="true">
      <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
        <path d="M0 0 L0 60 C 180 100 360 20 600 60 C 840 100 1020 20 1200 60 L1200 0 Z" fill="var(--wave-fill)" opacity="0.15"></path>
        <path d="M0 0 L0 80 C 220 120 380 40 600 80 C 820 120 960 40 1200 80 L1200 0 Z" fill="var(--wave-fill)" opacity="0.3"></path>
        <path d="M0 0 L0 100 C 160 120 400 60 600 100 C 800 120 1040 60 1200 100 L1200 0 Z" fill="var(--wave-fill)"></path>
      </svg>
    </div>

    <!-- Projects -->
    <section id="projects" class="py-12 sm:py-16 bg-white dark:bg-gray-950 transition-colors">
      <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
        <h2 class="text-xl sm:text-2xl font-semibold tracking-tight">Projects</h2>
        <div class="mt-6 grid gap-6 sm:grid-cols-2 auto-rows-fr">
          <article class="card overflow-hidden">
            <img src="./assets/images/libralinkFigma.jpg"
                 data-fallback="/Portfolio/assets/images/libralinkFigma.jpg, ./assets/images/libralinkFigma.jpeg, ./assets/images/LibraLinkFigma.jpg, ./assets/images/libralinkFigma.png"
                 alt="LibraLink • Figma"
                 class="h-64 w-full object-cover rounded-t-lg"
                 loading="lazy" />
            <div class="p-4">
              <h3 class="font-semibold">LibraLink • Figma</h3>
              <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Responsive UI exploration and prototyping based on resume highlights.</p>
              <div class="mt-3 flex flex-wrap gap-2">
                <span class="badge">Figma</span><span class="badge">UI</span><span class="badge">Responsive</span>
              </div>
            </div>
          </article>

          <article class="card overflow-hidden group relative">
            <img src="./assets/images/responsysFigma.jpg"
                 data-fallback="/Portfolio/assets/images/responsysFigma.jpg, ./assets/images/responsysFigma.jpeg, ./assets/images/ResponsysFigma.jpg, ./assets/images/responsysFigma.png"
                 alt="Responsys • Figma"
                 class="h-64 w-full object-cover rounded-t-lg"
                 loading="lazy" />
            <div class="p-4">
              <h3 class="font-semibold">Responsys • Figma</h3>
              <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Dashboard layout and component system aligned with resume experience.</p>
              <div class="mt-3 flex flex-wrap gap-2">
                <span class="badge">Figma</span><span class="badge">Design System</span><span class="badge">Components</span>
              </div>
            </div>
            <!-- Expandable overlay on hover -->
            <div class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end rounded-lg overflow-hidden">
              <div class="w-full transform translate-y-full group-hover:translate-y-0 transition-transform duration-300 ease-out bg-gradient-to-t from-black/80 to-transparent p-6">
                <a class="btn w-full text-center justify-center" href="https://responsysgarcia.com" target="_blank" rel="noopener noreferrer">Live Demo →</a>
              </div>
            </div>
          </article>
        </div>
      </div>
    </section>

    <footer id="site-footer" class="mt-12"></footer>
    
    <!-- Scroll to top button -->
    <button id="scroll-to-top" class="scroll-to-top" aria-label="Scroll to top" title="Scroll to top">
      <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
        <path d="M12 19V5M5 12l7-7 7 7" stroke-linecap="round" stroke-linejoin="round"></path>
      </svg>
    </button>

    <script>
  document.addEventListener('DOMContentLoaded', () => {
    const intro = document.getElementById('intro-overlay');
    if (!intro) return;
    const hide = () => {
      intro.classList.add('intro-hide');
      setTimeout(() => intro.remove(), 600);
    };
    setTimeout(hide, 1600);
    intro.addEventListener('click', hide);
  });

  // Theme initialization and toggle
  function initTheme() {
    const html = document.documentElement;
    const saved = localStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const isDark = saved ? saved === 'dark' : prefersDark;
    if (isDark) html.classList.add('dark'); else html.classList.remove('dark');
    updateThemeButton();
  }

  function updateThemeButton() {
    const btn = document.getElementById('theme-toggle');
    const isDark = document.documentElement.classList.contains('dark');
    const sunIcon = document.getElementById('sun-icon');
    const moonIcon = document.getElementById('moon-icon');
    if (isDark) {
      sunIcon?.classList.add('hidden');
      moonIcon?.classList.remove('hidden');
    } else {
      sunIcon?.classList.remove('hidden');
      moonIcon?.classList.add('hidden');
    }
  }

  function toggleTheme() {
    const html = document.documentElement;
    const isDark = html.classList.toggle('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
    updateThemeButton();
    syncWaveColorsToAbove();
  }

  document.getElementById('theme-toggle')?.addEventListener('click', toggleTheme);
  initTheme();

  // Load shared footer component and set year.
  fetch('./src/components/footer.html')
    .then(r => r.text())
    .then(html => {
      const el = document.getElementById('site-footer');
      if (el) el.innerHTML = html;
      const y = document.getElementById('year');
      if (y) y.textContent = new Date().getFullYear().toString();
    })
    .catch(console.error);

  // Interactive CTA links: glow follows cursor + subtle magnetic hover
  function initCtaLinks() {
    document.querySelectorAll('.cta-link').forEach(el => {
      let raf;
      const reset = () => {
        el.style.transform = '';
        el.style.removeProperty('--x');
        el.style.removeProperty('--y');
      };
      el.addEventListener('mousemove', (e) => {
        cancelAnimationFrame(raf);
        raf = requestAnimationFrame(() => {
          const rect = el.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          el.style.setProperty('--x', x + 'px');
          el.style.setProperty('--y', y + 'px');
          const dx = (x / rect.width - 0.5) * 10;
          const dy = (y / rect.height - 0.5) * 10;
          el.style.transform = `translate(${dx}px, ${dy}px)`;
        });
      });
      el.addEventListener('mouseleave', reset);
      el.addEventListener('blur', reset);
    });
  }

  // Image fallback: try alternate paths/extensions if initial load fails
  function setupImageFallbacks() {
    document.querySelectorAll('img[data-fallback]').forEach((img) => {
      const fallbacks = (img.dataset.fallback || '').split(',').map(s => s.trim()).filter(Boolean);
      let i = 0;
      img.addEventListener('error', () => {
        if (i < fallbacks.length) {
          img.src = fallbacks[i++];
        }
      });
    });
  }

  // Scroll to top button functionality
  function initScrollToTop() {
    const btn = document.getElementById('scroll-to-top');
    if (!btn) return;
    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) btn.classList.add('show');
      else btn.classList.remove('show');
    });
    btn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  }

  // Use the section above each wave to set its color (supports solid bg and gradients)
  function syncWaveColorsToAbove() {
    document.querySelectorAll('.wave-separator').forEach((wrap) => {
      const prev = wrap.previousElementSibling;
      if (!prev) return;
      const cs = getComputedStyle(prev);
      let color = cs.backgroundColor || 'rgba(0,0,0,0.05)';
      const bgImg = cs.backgroundImage;
      if (bgImg && bgImg !== 'none') {
        const lastRGBA = bgImg.match(/(rgba?\([^)]+\))(?!.*rgba?\()/);
        if (lastRGBA) color = lastRGBA[1];
      }
      const paths = wrap.querySelectorAll('path');
      paths.forEach((p, i) => {
        p.setAttribute('fill', color);
        // remove any stroke to avoid the thin line at the top of the wave
        p.setAttribute('stroke', 'none');
        p.removeAttribute('stroke-width');
        if (i === 0) p.setAttribute('opacity', '0.15');
        else if (i === 1) p.setAttribute('opacity', '0.30');
        else p.removeAttribute('opacity');
      });
    });
  }

  // Recompute on load and when system theme changes
  window.addEventListener('DOMContentLoaded', syncWaveColorsToAbove);
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', syncWaveColorsToAbove);

  // Initialize after theme and CTA setup
  initCtaLinks();
  setupImageFallbacks();
  initScrollToTop();
  syncWaveColorsToAbove();
</script>
  </body>
</html>